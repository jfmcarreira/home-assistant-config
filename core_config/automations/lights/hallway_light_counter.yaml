id: Ctrl Hallway Light
alias: Ctrl Hallway Light
initial_state: true
trigger:
  platform: numeric_state
  entity_id: counter.hallway_switch_toggle_count
  above: 0
  for:
    milliseconds: 150
action:
  - service_template: >
      {% if is_state('counter.hallway_switch_toggle_count', '3') %} 
          script.turn_on 
      {% else %} 
          light.toggle 
      {% endif %}
    data_template:
      entity_id: >
        {% if is_state(counter.hallway_switch_toggle_count, '3') %}
            script.night_away 
        {% else %} 
            light.hallway 
        {% endif %}
  - service: counter.reset
    entity_id: counter.hallway_switch_toggle_count
