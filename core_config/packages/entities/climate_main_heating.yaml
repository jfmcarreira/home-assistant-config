# This handles the climate entities
#
# https://www.home-assistant.io/integrations/generic_thermostat/
#
climate:
  - platform: generic_thermostat
    name: Heating
    heater: input_boolean.heating_running_feedback
    target_sensor: sensor.heating_temperature
    min_temp: 14
    max_temp: 22
    min_cycle_duration:
      minutes: 1
    #initial_hvac_mode: "off"
    cold_tolerance: 0
    hot_tolerance: 0
    keep_alive:
      seconds: 30

  - platform: generic_thermostat
    name: Heating Ongoing Water
    heater: input_boolean.heating_running_ongoing_water
    target_sensor: sensor.heating_ongoing_water_temperature
    precision: 1.0
    min_temp: 20
    max_temp: 70
    min_cycle_duration:
      minutes: 10
    cold_tolerance: 5
    hot_tolerance: 5
    keep_alive:
      seconds: 30

sensor:
  - platform: template
    sensors:
      heating_temperature:
        friendly_name: "Heating Temperature"
        device_class: temperature
        value_template: >
          {% if is_state("input_select.heating_temperature_selection", "Sala") %} 
            {{ states( 'sensor.living_room_temperature' ) }}
          {% elif is_state("input_select.heating_temperature_selection", "Quarto") %} 
            {{ states( 'sensor.master_bedroom_temperature' ) }}
          {% elif is_state("input_select.heating_temperature_selection", "Escrit√≥rio") %} 
            {{ states( 'sensor.office_temperature' ) }}
          {% else %}
            {{ states( 'sensor.average_temperature' ) }}
          {% endif %}
        entity_id:
          - input_select.heating_temperature_selection
          - sensor.average_temperature
          - sensor.living_room_temperature
          - sensor.master_bedroom_temperature
          - sensor.office_temperature