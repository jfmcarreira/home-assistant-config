title: Kiosk
id: kiosk
path: kiosk
badges: []
icon: mdi:tablet-dashboard
panel: true
cards:
  - type: custom:layout-card
    layout: vertical
    max_columns: 3
    cards:
      - type: custom:clock-card     

      - type: weather-forecast
      #- type: custom:weather-card
        name: ""
        #entity: weather.meteorologia
        entity: weather.ipma
        details: true
        forecast: true              
           
      - type: horizontal-stack
        cards:
          - type: picture-entity
            entity: person.joao
            image: /local/img_joao.jpg
            aspect_ratio: 1.5/1
            state_filter:
              "home": grayscale(0%)
              "away": grayscale(100%)
            show_name: false
            tap_action:
              action: call-service
              service: browser_mod.popup
              service_data:
                title: João
                card:
                  type: entities
                  entities:
                    - entity: person.joao
                      name: Localização
                    - entity: proximity.dist_home_joao
                      type: custom:secondaryinfo-entity-row
                      name: Distancia
                    - binary_sensor.magnesium
                    - binary_sensor.pegasus
                    - binary_sensor.boron
                deviceID:
                  - this
          - type: picture-entity
            entity: person.bianca
            image: /local/img_bianca.jpg
            aspect_ratio: 1.5/1
            state_filter:
              "home": grayscale(0%)
              "away": grayscale(100%)
            show_name: false
            tap_action:
              action: call-service
              service: browser_mod.popup
              service_data:
                title: Bianca
                card:
                  type: entities
                  entities:
                    - person.bianca
                    - binary_sensor.bianca_phone
                    - binary_sensor.strontium
                deviceID:
                  - this
          - type: picture-entity
            entity: binary_sensor.litter_box_motion
            image: /local/img_cats.jpg
            aspect_ratio: 1.5/1
            state_filter:
              "on": grayscale(72%)
              "off": grayscale(0%)
            show_name: false
            tap_action:
              action: call-service
              service: browser_mod.popup
              service_data:
                title: Fluffy/Pluma
                card:
                  type: custom:vertical-stack-in-card
                  cards:
                    - type: entities
                      entities:
                        - binary_sensor.litter_box_motion
                        #- binary_sensor.cat_litter_box
                        - counter.cat_litter_box_visits
                        - sensor.cat_litter_box_last_visit
                        - sensor.cat_litter_box_last_clean
                        - sensor.cat_litter_box_last_change
                    
                    - type: horizontal-stack
                      cards:
                        - type: "custom:button-card"
                          icon: mdi:shovel
                          #aspect_ratio:
                          layout: "icon_name"
                          name: Limpar
                          tap_action:
                            action: call-service
                            service: script.cat_litter_clean
                        
                        - type: "custom:button-card"
                          icon: mdi:autorenew
                          #aspect_ratio:
                          layout: "icon_name"
                          name: Trocar
                          tap_action:
                            action: call-service
                            service: script.cat_litter_change
                deviceID:
                  - this
            hold_action:
              action: call-service
              service: python_script.catlitter_reset

      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:mini-graph-card
            name: Potência Consumida
            hour24: true
            height: 60
            line_width: 2
            hours_to_show: 24
            points_per_hour: 2
            agregate_func: avg
            group_by: 1800s
            show:
              points: hover
              average: false
              extrema: false
            entities: 
              - sensor.bhpzem_power
          
          - type: glance
            show_icon: False
            entities:
              - entity: sensor.daily_energy
                name: Diário
              - entity: sensor.monthly_energy
                name: Mensal
              - entity: sensor.monthly_energy_cost
                name: Factura
      
      - break   
      
      - type: picture-glance
        title: Corredor
        image: /local/room_images/img_hallway_25_10.jpg
        aspect_ratio: 2.8/1
        entity: group.hall
        tap_action:
          action: more-info
        hold_action:
          action: none
        entities:
          #- binary_sensor.kitchen_motion
          - binary_sensor.front_door
          - binary_sensor.browser_tf201_kyosk
          - switch.tradfri_power_outlet
          - light.hallway
          - light.kitchen
          - light.kitchen_pantry

      - type: picture-glance
        title: Sala de Estar
        image: /local/room_images/img_living_room_25_10.jpg
        aspect_ratio: 2.8/1
        entity: group.living_room
        tap_action:
          action: more-info
        hold_action:
          action: none
        entities:
          - entity: light.living_room_table
          - entity: light.living_room_abajur
            icon: mdi:lamp
          - entity: light.living_room_tv_leds
            icon: mdi:led-strip
          - entity: light.living_room_window
          #- entity: camera.webcam_livingroom
          - entity: media_player.media_center
            icon: mdi:television
          - entity: media_player.google_home_mini
            icon: mdi:cast-audio
        

      - break

      - type: picture-glance
        title: Escritório
        image: /local/room_images/img_office_25_10.jpg
        aspect_ratio: 2.8/1
        entity: group.office
        tap_action:
          action: more-info
        hold_action:
          action: none
        entities:
          - entity: light.office
            icon: mdi:track-light
          
          #- camera.camptz_office
       
      - type: picture-glance
        title: Quarto
        image: /local/room_images/img_bedroom_25_10.jpg
        aspect_ratio: 2.8/1
        entity: group.master_bedroom
        tap_action:
          action: more-info
        hold_action:
          action: none
        entities:
          - entity: light.master_bedroom_left_bed
            icon: mdi:lamp
          - entity: light.master_bedroom
            icon: mdi:lightbulb
          - entity: light.master_bedroom_right_bed
            icon: mdi:lamp
            
      - break
      - break


      - type: horizontal-stack
        cards:
          - type: custom:mini-graph-card
            name: Temperatura
            hours_to_show: 24
            points_per_hour: 1
            hour24: true
            height: 110
            line_width: 3
            agregate_func: avg
            group_by: 1h
            show:
              points: hover
              average: false
              extrema: false
            entities: 
              - sensor.average_temperature

          - type: custom:mini-graph-card
            name: Humidade
            hours_to_show: 24
            points_per_hour: 1
            hour24: true
            height: 110
            line_width: 3
            agregate_func: avg
            group_by: 1h
            show:
              points: hover
              average: false
              extrema: false
            entities: 
              - sensor.average_humidity

      - type: custom:simple-thermostat
        name: Aquecimento
        entity: climate.heating
        sensors:
          - entity: sensor.heating_ongoing_water_temperature
            name: Water
        modes:
          "heat":
            include: true
            name: Quente
            icon: false
        control:
          _names: off

      - break
            
      - type: custom:vertical-stack-in-card
        cards:            
          - type: horizontal-stack
            cards:
              - type: entities
                show_header_toggle: false
                entities:
                  - entity: input_select.speakers_selector
                    name: Player
              - type: entities
                show_header_toggle: false
                entities:
                  - entity: input_select.radio_station
                    name: Estação de Rádio
          - type: conditional
            conditions:
              - entity: input_select.radio_station
                state: "YouTube URL"
            card:  
              type: entities
              show_header_toggle: false
              entities:
                - entity: input_text.youtube_url
             

          - type: horizontal-stack
            cards:
              - type: "custom:button-card"
                icon: mdi:play
                #aspect_ratio:
                layout: "icon_name"
                size: 70%
                name: Play
                tap_action:
                  action: call-service
                  service: script.play_radio
              
              - type: "custom:button-card"
                icon: mdi:pause
                #aspect_ratio:
                layout: "icon_name"
                size: 70%
                name: Pause
                tap_action:
                  action: call-service
                  service: script.stop_radio
          
              - type: "custom:button-card"
                icon: mdi:stop
                #aspect_ratio:
                layout: "icon_name"
                size: 70%
                name: Stop
                tap_action:
                  action: call-service
                  service: script.stop_radio

      - type: glance
        entities:
          - entity: sensor.birthday_ricardo
            name: Push Day
            icon: mdi:baby-face
          - entity: sensor.birthday_joao
            name: João
            icon: mdi:cake-variant
          - entity: sensor.birthday_bianca
            name: Bianca
            icon: mdi:cake-variant
          - entity: sensor.anniversary_wedding
            name: Casamento
            icon: mdi:ring
            
      - type: horizontal-stack
        cards:
          - type: "custom:button-card"
            size: 100%
            aspect_ratio: 5/2
            entity: input_boolean.house_guest
            styles:
              grid:
                - position: relative
              custom_fields:
                notification:
                  - border-radius: 50%
                  - position: absolute
                  - right: 10%
                  - top: 10%
                  - height: 20px
                  - width: 20px
                  - font-size: 8px
                  - line-height: 20px
                  - icon: mdi:home
            custom_fields:
              notification: >
                [[[
                  if (states['binary_sensor.notify_home'].state == "on")
                    return `<ha-icon icon="mdi:home"      style="width: 18px; height: 18px;"> </ha-icon>`
                ]]]

          - type: custom:button-card
            size: 100%
            aspect_ratio: 5/2
            color_type: blank-card
          - type: custom:button-card
            size: 100%
            aspect_ratio: 5/2
            entity: script.night_away
            icon: mdi:weather-night
            tap_action:
              action: none
            hold_action:
              action: call-service
              service: script.turn_on
              service_data:
                entity_id: script.night_away
            name: "Night/Away"

      

      
      # - type: horizontal-stack
      #   cards:
      #     - type: "custom:button-card"
      #       size: 55%
      #       entity: light.hallway
      #       name: Corredor
      #     - type: "custom:button-card"
      #       size: 55%
      #       entity: light.kitchen
      #       name: Cozinha
      #     - type: "custom:button-card"
      #       size: 55%
      #       entity: light.living_room_table
      #       name: Sala
                  
      
                  
      
