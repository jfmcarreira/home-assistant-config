# This handles the changing MEO box channel
#
# https://www.home-assistant.io/integrations/ifttt/
#

automation old:
  # General rule to launch routines
  # Routine Dinner Time { "action": "routine", "service":"script.routine_dinner_time" }
  # Task Roborock Cleaning { "action": "routine", "service":"script.task_roborock_clean" }
  # Task Cat Litter Clean { "action": "routine", "service":"script.task_cat_litter_clean" }
  # Task Cat Litter Change { "action": "routine", "service":"script.task_cat_litter_change" }
  # { "action": "routine", "service":"script.meo_reset_current_show" }
  # { "action": "routine", "service":"script.meo_reset_previous_show" }
  - alias: IFTTT Launch Routine
    description: "Send Roborock to clean; Activate Dinner Time"
    trigger:
      - event_data:
          action: routine
        event_type: ifttt_webhook_received
        platform: event
    action:
      - service_template: "{{ trigger.event.data.service }}"

  # Change TV to Channel #
  # Body configured in IFTTT: { "action": "change_meo_channel", "channel":"{{NumberField}}" }
  - alias: IFTTT Change Meo Box Channel
    trigger:
      - event_data:
          action: change_meo_channel
        event_type: ifttt_webhook_received
        platform: event
    action:
      - data_template:
          channel: "{{ trigger.event.data.channel }}"
          entity_id: media_player.living_room_tv_meo_box
        service: python_script.change_meo_box_channel

  # If You say "Activate $ on Netflix", then Make a web request
  # Body configured in IFTTT: { "action": "show_netflix_living_room_tv", "show_movie":"{{TextField}}" }
  - alias: IFTTT Living Room TV Netflix Show
    trigger:
      - event_data:
          action: show_netflix_living_room_tv
        event_type: ifttt_webhook_received
        platform: event
    action:
      - data_template:
          entity_id: media_player.living_room_tv
          show: "{{ trigger.event.data.show_movie }}"
        service: python_script.netflix_play_show

  # If You say "TV Press $ ", then Make a web request
  # Body configured in IFTTT: { "action": "remote_control_tv", "button":"{{TextField}}" }
  - alias: IFTTT Living Room Media Center Remote
    trigger:
      - event_data:
          action: remote_control_tv
        event_type: ifttt_webhook_received
        platform: event
    action:
      - data_template:
          button: "{{ trigger.event.data.button }}"
        service: python_script.living_room_media_center_remote
