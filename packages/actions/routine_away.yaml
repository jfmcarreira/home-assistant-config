script:        
  routine_away:
    alias: Routine Leave Home
    sequence:
    - service: climate.turn_off
      entity_id: climate.heating
    
    - service: media_player.turn_off
      entity_id: media_player.living_room_tv
      
    - service: light.turn_off
      entity_id: all
      
    - service: light.turn_on
      entity_id: light.hallway
    
    - wait_template: "{{ is_state('binary_sensor.front_door', 'on') }}"
    
    - service: python_script.vacuum_room
      data:
        room: switch_based
        is_zone: 0
        runs: 1
    
    - wait_template: "{{ is_state('binary_sensor.front_door', 'off') }}"
    
    #- delay: 00:00:40
    - service: light.turn_off
      entity_id: all
      
