homeassistant:
  customize:
    cover.second_floor:
      assumed_state: true

cover:
  - platform: template
    covers:
      second_floor:
        device_class: shutter
        friendly_name: Grupo de Estores do 1ยบ Andar
        open_cover:
          service: cover.open_cover
          data:
            entity_id: >-
              {% set list_of_covers = [] %}
              {% if is_state('input_boolean.cover_control_group_master_bedroom', 'on') %}
                {% set list_of_covers = list_of_covers + ['cover.master_bedroom'] %}
              {% endif %}
              {% if is_state('input_boolean.cover_control_group_bedroom_ricardo', 'on') %}
                {% set list_of_covers = list_of_covers + ['cover.bedroom_ricardo'] %}
              {% endif %}
              {% if is_state('input_boolean.cover_control_group_bedroom_guest', 'on') %}
                {% set list_of_covers = list_of_covers + ['cover.bedroom_guest'] %}
              {% endif %}
              {{ list_of_covers|join(',') }}
        close_cover:
          service: cover.close_cover
          data:
            entity_id: >-
              {% set list_of_covers = [] %}
              {% if is_state('input_boolean.cover_control_group_master_bedroom', 'on') %}
                {% set list_of_covers = list_of_covers + ['cover.master_bedroom'] %}
              {% endif %}
              {% if is_state('input_boolean.cover_control_group_bedroom_ricardo', 'on') %}
                {% set list_of_covers = list_of_covers + ['cover.bedroom_ricardo'] %}
              {% endif %}
              {% if is_state('input_boolean.cover_control_group_bedroom_guest', 'on') %}
                {% set list_of_covers = list_of_covers + ['cover.bedroom_guest'] %}
              {% endif %}
              {{ list_of_covers|join(',') }}
        stop_cover:
          service: cover.stop_cover
          data:
            entity_id: >-
              {% set list_of_covers = [] %}
              {% if is_state('input_boolean.cover_control_group_master_bedroom', 'on') %}
                {% set list_of_covers = list_of_covers + ['cover.master_bedroom'] %}
              {% endif %}
              {% if is_state('input_boolean.cover_control_group_bedroom_ricardo', 'on') %}
                {% set list_of_covers = list_of_covers + ['cover.bedroom_ricardo'] %}
              {% endif %}
              {% if is_state('input_boolean.cover_control_group_bedroom_guest', 'on') %}
                {% set list_of_covers = list_of_covers + ['cover.bedroom_guest'] %}
              {% endif %}
              {{ list_of_covers|join(',') }}
