group:
  google_assistant_speakers:
    entities:
      - media_player.ghm_living_room
      - media_player.ghm_office
      - media_player.gh_clock_kitchen



input_number:
  google_home_volume_day:
    name: Google Assistant Volume Dia
    min: 0
    max: 100
    step: 5
    unit_of_measurement: "%"
  google_home_volume_evening:
    name: Google Assistant Volume Final do Dia
    min: 0
    max: 100
    step: 5
    unit_of_measurement: "%"
  google_home_volume_night:
    name: Google Assistant Volume Night
    min: 0
    max: 100
    step: 5
    unit_of_measurement: "%"

homeassistant:
  customize:
    automation.media_google_home_day_volume:
      friendly_name: Google Home Definição Volume de Dia
    automation.media_google_home_evening_volume:
      friendly_name: Google Home Definição Volume de Fim de Dia
    automation.media_google_home_night_volume:
      friendly_name: Google Home Definição Volume de Noite
      
automation old:
  - alias: media_google_home_day_volume
    trigger:
      - platform: homeassistant
        event: start
      - platform: state
        entity_id: input_number.google_home_volume_day
      - platform: time
        at: '08:00:00'
      - platform: time_pattern
        minutes: 30
    condition:
      - condition: time
        after: '08:00:00'
        before: '21:00:00'
      - condition: state
        entity_id: group.google_assistant_speakers
        state: "off"
    action:
      - entity_id: group.google_assistant_speakers
        service: media_player.volume_set
        data_template:
          volume_level: >
            {{ ( states( 'input_number.google_home_volume_day' ) | int ) / 100 }}


  - alias: media_google_home_evening_volume
    trigger:
      - platform: homeassistant
        event: start
      - platform: state
        entity_id: input_number.google_home_volume_evening
      - platform: time
        at: '21:00:00'
      - platform: time_pattern
        minutes: 30
    condition:
      - condition: time
        after: '21:00:00'
        before: '00:00:00'
      - condition: state
        entity_id: group.google_assistant_speakers
        state: "off"
    action:
      - entity_id: group.google_assistant_speakers
        service: media_player.volume_set
        data_template:
          volume_level: >
            {{ ( states( 'input_number.google_home_volume_evening' ) | int ) / 100 }}

  - alias: media_google_home_night_volume
    trigger:
      - platform: homeassistant
        event: start
      - platform: state
        entity_id: input_number.google_home_volume_night
      - platform: time
        at: '00:00:00'
      - platform: time_pattern
        minutes: 30
    condition:
      - condition: time
        after: '00:00:00'
        before: '08:00:00'
      - condition: state
        entity_id: group.google_assistant_speakers
        state: "off"
    action:
      - entity_id: group.google_assistant_speakers
        service: media_player.volume_set
        data_template:
          volume_level: >
            {{ ( states( 'input_number.google_home_volume_night' ) | int ) / 100 }}
