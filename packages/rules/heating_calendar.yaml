homeassistant:
  customize:
    automation.heating_calendar_auto_on:
      friendly_name: Ligar Aquecimento via Calendário
    automation.heating_calendar_auto_off:
      friendly_name: Desligar Aquecimento via Calendário

binary_sensor:
  - platform: template
    sensors:
      calendar_home_automation_heating_state:
        friendly_name: Calendário de Automações - Aquecimento
        value_template: >
          {{ is_state('calendar.home_automation_heating', 'on') and is_state_attr('calendar.home_automation_heating', 'message', 'Aquecimento') }}
      
automation old:        
  - alias: heating_calendar_auto_on
    trigger:
      - platform: template
        value_template: "{{ is_state('calendar.home_automation_heating', 'on') and is_state_attr('calendar.home_automation_heating', 'message', 'Aquecimento On') }}"
      - platform: state
        entity_id: binary_sensor.calendar_home_automation_heating_state
        from: "off"
        to: "on"
    #condition:
      #- condition: template
        #value_template: "{{ is_state_attr('calendar.home_automation_heating', 'message', 'Aquecimento On') }}"
    action:
      - service: climate.turn_on
        entity_id: climate.heating
  
  - alias: heating_calendar_auto_off
    trigger:
      - platform: template
        value_template: "{{ is_state('calendar.home_automation_heating', 'on') and is_state_attr('calendar.home_automation_heating', 'message', 'Aquecimento Off') }}"
      - platform: state
        entity_id: binary_sensor.calendar_home_automation_heating_state
        from: "on"
        to: "off"
    #condition:
      #- condition: template
        #value_template: "{{ is_state_attr('calendar.home_automation_heating', 'message', 'Aquecimento Off') }}"
    action:
      - service: climate.turn_off
        entity_id: climate.heating
