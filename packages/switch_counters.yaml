################################################################
## Counters
################################################################
counter:
  hallway_switch_toggle_count:
    initial: 0
    step: 1
  master_bedroom_left_switch_toggle_count:
    initial: 0
    step: 1
  master_bedroom_right_switch_toggle_count:
    initial: 0
    step: 1

automation old:
  - id: Ctrl Count Light Switches
    alias: Ctrl Count Light Switches
    initial_state: true
    trigger:
      - platform: state
        entity_id: binary_sensor.master_bedroom_left_sw
        from: "off"
        to: "on"
      - platform: state
        entity_id: binary_sensor.master_bedroom_left_sw
        from: "on"
        to: "off"
      - platform: state
        entity_id: binary_sensor.master_bedroom_right_sw
        from: "off"
        to: "on"
      - platform: state
        entity_id: binary_sensor.master_bedroom_right_sw
        from: "on"
        to: "off"
    action:
      - service: counter.increment
        data_template:
          entity_id: >
            {% if trigger.entity_id == "binary_sensor.master_bedroom_right_sw" %} 
                counter.master_bedroom_right_switch_toggle_count
            {% else %}  
                counter.master_bedroom_left_switch_toggle_count
            {% endif %}

  - id: Ctrl Hallway Light
    alias: Ctrl Hallway Light
    initial_state: true
    trigger:
      platform: numeric_state
      entity_id: counter.hallway_switch_toggle_count
      above: 0
      for:
        milliseconds: 150
    action:
      - service_template: >
          {% if is_state('counter.hallway_switch_toggle_count', '3') %} 
              script.turn_on 
          {% else %} 
              light.toggle 
          {% endif %}
        data_template:
          entity_id: >
            {% if is_state(counter.hallway_switch_toggle_count, '3') %}
                script.night_away 
            {% else %} 
                light.hallway 
            {% endif %}
      - service: counter.reset
        entity_id: counter.hallway_switch_toggle_count

  - id: Ctrl Master Bedroom Bed Left Light
    alias: Ctrl Master Bedroom Bed Left Light
    initial_state: true
    trigger:
      - platform: numeric_state
        entity_id: counter.master_bedroom_left_switch_toggle_count
        above: 0
        for:
          milliseconds: 150
    action:
      - service: light.toggle
        data_template:
          entity_id: >
            {% if is_state('counter.master_bedroom_left_switch_toggle_count', '2') %} 
                light.master_bedroom
            {% else %}
                light.master_bedroom_left_bed
            {% endif %}
      - service: counter.reset
        entity_id: counter.master_bedroom_left_switch_toggle_count

  - id: Ctrl Master Bedroom Bed Right Light
    alias: Ctrl Master Bedroom Bed Right Light
    initial_state: true
    trigger:
      - platform: numeric_state
        entity_id: counter.master_bedroom_right_switch_toggle_count
        above: 0
        for:
          milliseconds: 150
    action:
      - service: light.toggle
        data_template:
          entity_id: >
            {% if is_state('counter.master_bedroom_right_switch_toggle_count', '2') %} 
                light.master_bedroom
            {% else %}
                light.master_bedroom_right_bed
            {% endif %}
      - service: counter.reset
        entity_id: counter.master_bedroom_right_switch_toggle_count

  - id: Ctrl Toogle Living Room Abajur Light
    alias: Ctrl Toogle Living Room Abajur Light
    initial_state: true
    trigger:
      - entity_id: binary_sensor.living_room_window_light_long_sw
        platform: state
        to: "on"
    action:
      - data:
          entity_id: light.living_room_abajur
        service: light.toggle

  - id: Ctrl Toogle Living Room TV LEDs
    alias: Ctrl Toogle Living Room TV LEDs
    initial_state: true
    trigger:
      - entity_id: binary_sensor.living_room_table_light_long_sw
        platform: state
        to: "on"
    action:
      - data:
          entity_id: light.living_room_tv_leds
        service: light.toggle
