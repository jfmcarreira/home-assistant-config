################################################################
## Temperature/Humidity
################################################################
homeassistant:
  customize:  
    climate.heating:
      friendly_name: Aquecimento
  customize_glob:
    "sensor.*temperature":
      device_class: temperature
      icon: mdi:thermometer
      unit_of_measurement: "Â°C"
    "sensor.*humidity":
      device_class: humidity
      icon: mdi:water-percent
      unit_of_measurement: "%"


#sensor mijia:
#  - platform: min_max
#    name: mijia_office_temperature
#    type: last
#    entity_ids:
#      - sensor.al_xiaomi_s0_temperature
#      - sensor.ba_xiaomi_s0_temperature

#  - platform: min_max
#    name: mijia_office_humidity
#    type: last
#    entity_ids:
#      - sensor.al_xiaomi_s0_humidity
#      - sensor.ba_xiaomi_s0_humidity

#  - platform: mitemp_bt
#    mac: 58:2D:34:32:55:01
#    name: Office Temperature
#    force_update: false
#    median: 3
#    monitored_conditions:
#      - temperature
#      - humidity
#      - battery

sensor avg:
  - platform: min_max
    name: Average Temperature
    type: mean
    round_digits: 1
    entity_ids:
      - sensor.office_temperature
      - sensor.living_room_temperature
      - sensor.master_bedroom_temperature

  - platform: min_max
    name: Average Humidity
    type: mean
    round_digits: 1
    entity_ids:
      - sensor.office_humidity
      - sensor.living_room_humidity
      - sensor.master_bedroom_humidity

  - platform: template
    sensors:
      heating_temperature:
        friendly_name: "Heating Temperature"
        device_class: temperature
        value_template: >
          {% if is_state("input_select.heating_temperature_selection", "Living Room") %} 
            {{ states( 'sensor.living_room_temperature' ) }}
          {% elif is_state("input_select.heating_temperature_selection", "Bedroom") %} 
            {{ states( 'sensor.master_bedroom_temperature' ) }}
          {% else %}
            {{ states( 'sensor.mijia_office_temperature' ) }}
          {% endif %}
        entity_id:
          - input_select.heating_temperature_selection
          - sensor.living_room_temperature
          - sensor.master_bedroom_temperature
          - sensor.office_temperature

sensor mold:
  - platform: mold_indicator
    indoor_temp_sensor: sensor.mijia_temperature
    indoor_humidity_sensor: sensor.mijia_humidity
    outdoor_temp_sensor: sensor.weather_temperature
    calibration_factor: 2.0
