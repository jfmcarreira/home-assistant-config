################################################################
## Temperature/Humidity
################################################################
sensor mijia:
  - platform: min_max
    name: mijia_office_temperature
    type: last
    entity_ids:
      - sensor.al_xiaomi_s0_temperature
      - sensor.ba_xiaomi_s0_temperature

  - platform: min_max
    name: mijia_office_humidity
    type: last
    entity_ids:
      - sensor.al_xiaomi_s0_humidity
      - sensor.ba_xiaomi_s0_humidity

sensor avg:
  - platform: min_max
    name: Average Temperature
    type: mean
    round_digits: 1
    entity_ids:
      - sensor.mijia_office_temperature
      - sensor.living_room_temperature
      - sensor.master_bedroom_temperature

  - platform: min_max
    name: Average Humidity
    type: mean
    round_digits: 1
    entity_ids:
      - sensor.mijia_office_humidity
      - sensor.living_room_humidity
      - sensor.master_bedroom_humidity

  - platform: template
    sensors:
      heating_temperature:
        friendly_name: "Heating Temperature"
        device_class: temperature
        value_template: >
          {% if is_state("input_select.heating_temperature_selection", "Living Room") %} 
            {{ states( 'sensor.living_room_temperature' ) }}
          {% elif is_state("input_select.heating_temperature_selection", "Bedroom") %} 
            {{ states( 'sensor.master_bedroom_temperature' ) }}
          {% else %}
            {{ states( 'sensor.mijia_office_temperature' ) }}
          {% endif %}
        entity_id:
          - input_select.heating_temperature_selection
          - sensor.living_room_temperature
          - sensor.master_bedroom_temperature
          - sensor.mijia_office_temperature

sensor mold:
  - platform: mold_indicator
    indoor_temp_sensor: sensor.mijia_temperature
    indoor_humidity_sensor: sensor.mijia_humidity
    outdoor_temp_sensor: sensor.weather_temperature
    calibration_factor: 2.0
