automation insert:
  - alias: "Record Monthly Consumption to Database"
    initial_state: true
    mode: queued
    max: 10
    trigger:
      - platform: state
        entity_id: sensor.monthly_energy
        attribute: last_period
    action:
      - service: shell_command.external_my_sql_insert
        data_template:
          table: monthly_energy_bill
          value: >
            {{ states.sensor.monthly_energy.attributes.last_period }}

    

  - alias: "Daily Stats Insert Value of Energy to Database"
    initial_state: true
    mode: queued
    max: 10
    trigger:
      - platform: state
        entity_id: sensor.daily_energy
    action:
      - service: shell_command.external_my_sql_insert
        data_template:
          table: daily_energy
          value: >
            {{ states.sensor.daily_energy.state }}
            
            
  - alias: "Daily Stats Insert Value of Partial Energy of to Database"
    initial_state: true
    mode: queued
    max: 20
    trigger:
      - platform: state
        entity_id: sensor.daily_energy
      - platform: state
        entity_id: sensor.daily_energy_living_room
      #- platform: state
        #entity_id: sensor.daily_energy_laundry
      - platform: state
        entity_id: sensor.daily_energy_kitchen_oven
      - platform: state
        entity_id: sensor.daily_energy_dish_wash_machine
      - platform: state
        entity_id: sensor.daily_energy_washing_machine
      - platform: state
        entity_id: sensor.daily_energy_fridge
      #- platform: state
        #entity_id: sensor.daily_energy_office_desk
      - platform: state
        entity_id: sensor.daily_energy_iron
      - platform: state
        entity_id: sensor.daily_energy_portable_heater
      - platform: state
        entity_id: sensor.daily_energy_lights
      - platform: state
        entity_id: sensor.daily_energy_remaining
    action:
      - service: shell_command.external_my_sql_insert
        data_template:
          table: daily_energy_partial
          value: >
            {{ trigger.to_state.state }}
          column: >
            {% if trigger.entity_id == "sensor.daily_energy" %}
              daily_energy_total
            {% elif trigger.entity_id == "sensor.daily_energy_living_room" %}
              daily_energy_living_room
            {% elif trigger.entity_id == "sensor.daily_energy_laundry" %}
              daily_energy_laundry
            {% elif trigger.entity_id == "sensor.daily_energy_kitchen_oven" %}
              daily_energy_kitchen_oven
            {% elif trigger.entity_id == "sensor.daily_energy_dish_wash_machine" %}
              daily_energy_dish_wash_machine
            {% elif trigger.entity_id == "sensor.daily_energy_washing_machine" %}
              daily_energy_washing_machine
            {% elif trigger.entity_id == "sensor.daily_energy_fridge" %}
              daily_energy_fridge
            {% elif trigger.entity_id == "sensor.daily_energy_office_desk" %}
              daily_energy_office_desk
            {% elif trigger.entity_id == "sensor.daily_energy_iron" %}
              daily_energy_iron
            {% elif trigger.entity_id == "sensor.daily_energy_portable_heater" %}
              daily_energy_portable_heater
            {% elif trigger.entity_id == "sensor.daily_energy_lights" %}
              daily_energy_lights
            {% elif trigger.entity_id == "sensor.daily_energy_remaining" %}
              daily_energy_remaining
            {% endif %}

            
 
